<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AI Research Agent</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sakura.css/css/sakura.css">
	<style>
		.container { max-width: 920px; margin: 0 auto; }
		.badge { display:inline-block; padding:2px 6px; background:#eee; border-radius:4px; margin-right:6px; }
		.flash { padding:10px 12px; border-radius:6px; margin:10px 0; }
		.flash.error { background:#ffe0e0; }
		.flash.warning { background:#fff2cc; }
	</style>
</head>
<body class="container">
	<h1>AI Research Agent</h1>

	{% for m in get_flashed_messages(with_categories=true) %}
		<div class="flash {{ m[0] }}">{{ m[1] }}</div>
	{% endfor %}

	{% if missing_keys and missing_keys|length > 0 %}
		<p>
			<strong>Missing API keys:</strong>
			{% for k in missing_keys %}<span class="badge">{{ k }}</span>{% endfor %}
		</p>
	{% endif %}

	<form method="post" action="{{ url_for('run') }}">
		<label for="query">Enter a research query:</label>
		<input type="text" id="query" name="query" placeholder="e.g., Latest research on AI in education" style="width:100%" />
		<button type="submit">Generate Report</button>
	</form>

	<h2>History</h2>
	{% if reports %}
		<ul>
			{% for r in reports %}
				<li>
					<a href="{{ url_for('view_report', report_id=r.id) }}">{{ r.query }}</a>
					<small> Â· {{ r.created_at }}</small>
				</li>
			{% endfor %}
		</ul>
	{% else %}
		<p>No reports yet. Submit a query above.</p>
	{% endif %}
</body>
</html>
